<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background-color: #1a3c6d; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .header a { color: white; text-decoration: none; margin-left: 15px; }
        .section { margin-top: 20px; background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .section h2 { color: #d32f2f; margin-bottom: 10px; }
        .job, .application { padding: 10px; border-bottom: 1px solid #ddd; }
        .application form { display: inline-block; }
        .application select, .application button { padding: 5px; margin-left: 10px; }
        .application button { background-color: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Admin Dashboard</h1>
            <div>
                <a href="{{ url_for('add_job') }}">Add Job</a>
                <a href="{{ url_for('logout') }}">Logout</a>
            </div>
        </div>

        <div class="section">
            <h2>Posted Jobs</h2>
            {% for job in jobs %}
                <div class="job">
                    {{ job.title }} - {{ job.company }}: {{ job.description }}
                </div>
            {% endfor %}
        </div>

        <div class="section">
            <h2>Applications</h2>
            {% for application in applications %}
                <div class="application">
                    Job: {{ application.job.title if application.job else 'Unknown Job' }} - 
                    Student: {{ application.applicant.username if application.applicant else 'Unknown Student' }} - 
                    Status: {{ application.status }}
                    <form method="POST" action="{{ url_for('update_status', app_id=application.id) }}">
                        <select name="status">
                            <option value="Pending" {% if application.status == 'Pending' %}selected{% endif %}>Pending</option>
                            <option value="Accepted" {% if application.status == 'Accepted' %}selected{% endif %}>Accepted</option>
                            <option value="Rejected" {% if application.status == 'Rejected' %}selected{% endif %}>Rejected</option>
                        </select>
                        <button type="submit">Update</button>
                    </form>
                </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>